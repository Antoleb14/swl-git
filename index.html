<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>reveal.js</title>

    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/reveal.css">
    <link rel="stylesheet" href="css/theme/swisslife.css">

    <!-- Theme used for syntax highlighting of code -->
    <link rel="stylesheet" href="lib/css/monokai.css">

    <!-- Printing and PDF exports -->
    <script>
		var link = document.createElement('link');
		link.rel = 'stylesheet';
		link.type = 'text/css';
		link.href = window.location.search.match(/print-pdf/gi) ? 'css/print/pdf.css' : 'css/print/paper.css';
		document.getElementsByTagName('head')[0].appendChild(link);
    </script>
</head>
<body>
<div class="reveal">
    <div class="slides">
        <section class="home-slide" data-background-image="img/bg_swl.png" data-background-size="contain"
                 data-background-color="#A11C36">
            <h3>Utiliser GIT comme un pro</h3>
            <br>
            <small>Code versioning</small>
        </section>
        <section>
            <section>
                <h3 class="title">Un peu d’histoire, qu’est-ce que GIT ?</h3>
                <ul>
                    <li class="fragment">Outil de versioning et gestion du code</li>
                    <li class="fragment">Leader mondial</li>
                    <li class="fragment">Créé par Linus Torvalds en 2005</li>
                    <li class="fragment">Aujourd’hui en version 2.25.0 (13/01/2020)</li>
                    <li class="fragment">« Git » signifie « connard » en argot britannique</li>
                    <li class="fragment">Compatible toutes plateformes</li>
                </ul>
            </section>
            <section>
                <img src="img/logo-git.png" alt="" class="no-border">
            </section>
        </section>
        <section>
            <section>
                <h3 class="title">Le versioning avec GIT</h3>
                <div>
                    <p class="fragment">Historique des modifications</p>
                    <p class="fragment">Fusion de code, dit « merge »</p>
                    <p class="fragment">Résolution des conflits</p>
                    <p class="fragment">Système distribué</p>
                    <p class="fragment">Système de branches</p>
                    <p class="fragment">Tag de version</p>
                </div>
            </section>
        </section>
        <section>
            <section>
                <h3 class="title">Let's Git started!</h3>
                <img src="https://media.giphy.com/media/CjmvTCZf2U3p09Cn0h/giphy.gif" class="no-border">
            </section>
        </section>
        <section>
            <section>
                <h3>Pour faire simple</h3>
                <ul>
                    <li>Utilisation d'une base objet locale, le dossier <b>.git</b></li>
                    <li class="fragment">Git suit les changements de contenu, pas le fichier entier</li>
                    <li class="fragment">Chaque enregistrement de modification est un <b>commit</b></li>
                    <li class="fragment">Tous les commits forment le code entier du projet</li>
                </ul>
            </section>
            <section>
                <p>Git est révolutionnaire dans sa méthode de gestion des changements</p>
                <p class="fragment">Il ne gère que des instantanés d'une version...</p>
                <p class="fragment">Ainsi si un fichier n'a pas changé, il fait une référence vers le fichier original</p>
                <p class="fragment">Et le tout en local sur votre poste, fini la latence!</p>
            </section>
            <section>
                <p>GIT gère 3 états pour un fichier :</p>
                <ul class="small">
                    <li class="fragment">Modifié => Le fichier est modifié mais non validé dans la base locale</li>
                    <li class="fragment">Indexé => Le fichier modifié sera enregistré dans la base locale</li>
                    <li class="fragment">Validé (Commité) => Les données sont enregistrées dans la base locale</li>
                </ul>
            </section>
            <section>
                <p>Nous avons donc 3 sections pour un projet GIT</p>
                <img src="img/git-dir.png" alt="" class="no-border">
            </section>
            <section>
                <p>Pour indexer un fichier et créer un commit</p>
                <pre>
                    <code class="bash" data-trim>
                        # On ajoute le fichier à la zone de "staging" / d'index
                        git add fichier.txt

                        # On créer le commit qui sera enregistré en base locale
                        git commit -m 'mon nom de commit'
                    </code>
                </pre>
                <p class="fragment">Seul <b>fichier.txt</b> a été modifié, les autres fichiers ne sont que des références vers les commits précédents (cf. parents)</p>
            </section>
            <section>
                <p>Au final, avec plusieurs commit enregistrés, notre <b>arbre</b> projet ressemblera à ça :</p>
                <pre>
                    <code class="bash" data-trim>
                        * mon nom de commit
                        * Commit 2
                        * Commit 1
                        * Init project
                    </code>
                </pre>
                <small class="fragment">Le dernier commit contiendra une référence vers le commit précédent, lui-même vers son parent etc...</small>
                <br>
                <small class="fragment">Chaque nouvelle modification validée (donc commitée) s'ajoutera à la liste en haut de l'arbre git.</small>
            </section>
        </section>
        <section>
            <section>
                <h3 class="title">Les commits</h3>
                <p>Un commit est morceau du code de l'application</p>
            </section>
            <section>
                <p>Un commit est identifié par un hash unique (gestion de l'intégrité)</p>
                <span class="fragment highlight-red" data-fragment-index="0">24b9da655</span>2252987aa493b52f8696cd6d3b00373
                <small class="fragment" data-fragment-index="0">Git raccourci régulièrement ce hash à 9 caractères pour faciliter la lecture</small>
            </section>
            <section>
                Les commandes de manipulation d'un commit :
                <pre>
                    <code class="bash" data-trim data-noescape>
                    git add [options...] [pathspec…​]

                    # Utilisation classique pour ajouter tout ce qui est dans l'index
                    git add -A

                    # Créer le commit avec un message
                    git commit -m "Message de commit"
                    </code>
                </pre>
                <small>Le commit "Message de commit" est créé sur le repository local avec un nouveau hash unique</small>
            </section>
            <section>
                <h5 class="title">Commiter dans le commit précédent, c'est possible?</h5>
                <p class="small">En cas d'erreur ou d'oubli dans un commit, vous pouvez modifier un fichier et le commiter directement dans le commit précédent</p>
                <pre>
                    <code class="bash" data-trim>
                        git add -A
                        git commit --amend
                    </code>
                </pre>
                <p class="small">Le dernier commit est modifié pour y insérer vos changements indexés</p>
            </section>
        </section>
        <section>
            <section>
                <h3 class="title">Les branches</h3>
                <img src="https://media.giphy.com/media/11qWN4GTZwMftu/giphy.gif" class="no-border" alt="">
            </section>
            <section>
                <p>Tout arbre a des branches, alors pour git c'est pareil !</p>
                <img src="img/branches.svg" class="fragment no-border" alt="">
            </section>
            <section>
                <p>Une branche n'est qu'un pointeur vers un commit</p>
                <p class="fragment">La branche principale de Git se nomme <b>master</b></p>
                <p class="fragment">Chaque commit sur la branche master fait avancer le pointeur d'un commit</p>
            </section>
            <section>
                <p>Pour créer une nouvelle branche <b>testing</b></p>
                <pre>
                    <code data-trim class="bash">
                        git branch testing
                    </code>
                </pre>
                <p class="small">Un nouveau pointeur vers le commit où nous sommes va être créé</p>
                <img src="img/branch-1.png" class="no-border" alt="">
            </section>
            <section>
                <h3 class="title">Comment Git sait-il où nous sommes actuellement?</h3>
                <div class="fragment">
                    <img src="img/branch-2.png" class="no-border" alt="">
                    <p class="small">Grâce au pointeur <b>HEAD</b> qui indique notre position, on remarque que créer une branche ne nous bascule pas automatiquement dessus</p>
                </div>
            </section>
            <section>
                <p>Basculer sur notre branche fraichement créée</p>
                <pre>
                    <code class="bash" data-trim>
                        git checkout testing
                    </code>
                </pre>
                <p class="small">On peut aussi créer une branche et basculer directement dessus avec une commande similaire</p>
                <pre>
                    <code class="bash" data-trim>
                        # Créer une branche et basculer dessus
                        git branch testing
                        git checkout testing

                        # Commande simplifiée
                        git checkout -b testing
                    </code>
                </pre>
            </section>
        </section>
        <section>
            <section>
                <h3 class="title">La fusion</h3>
                <img src="https://media.giphy.com/media/e4wU8Tq30oD28/giphy.gif" class="no-border" alt="">
            </section>
            <section>
                <p>Il existe 2 types de fusions, <b>fast-forward</b> et <b>three-way merge</b></p>
                <p class="fragment">Git choisit automatiquement quel type de fusion adopter</p>
            </section>
        </section>
        <section>
            <section>
                <h3 class="title">Fast-Forward Merge</h3>
                <pre>
                    <code class="bash" data-trim>
                        * commit 4 (HEAD -> hotfix)
                        * commit 3
                        * commit 2 (master)
                        * commit 1
                    </code>
                </pre>
                <p class="small">Nous avons créé 2 commits au dessus de <b>master</b> sur la branche <b>hotfix</b></p>
            </section>
            <section>
                <p>Ici le principe est simple, en <b>fast-forward</b> le pointeur de master sera remonté directement au niveau de <b>hotfix</b> (une avance rapide donc)</p>
            </section>
            <section>
                <pre>
                    <code class="bash" data-trim>
                        git checkout master
                        git merge hotfix # la commande de merge de hotfix sur master
                    </code>
                </pre>
                <p class="small">Nous aurons donc pour résultat</p>
                <pre>
                    <code class="bash" data-trim>
                        * commit 4 (HEAD -> master, hotfix)
                        * commit 3
                        * commit 2
                        * commit 1
                    </code>
                </pre>
                <p>On peut maintenant supprimer la branche <b>hotfix</b> avec la commande <b>git branch -d hotfix</b></p>
            </section>
        </section>
        <section>
            <section>
                <h3 class="title">Three-Way Merge</h3>
                <p class="small">Fusion à 3 sources</p>
            </section>
            <section>
                <p class="small">Lorsque j'ajoute un commit sur <b>testing</b>, puis un nouveau commit sur <b>master</b>, je créé une <b>divergence</b>.</p>
                <img src="img/fusion-1.png" class="no-border" alt="">
            </section>
            <section>
                <p>Pour fusionner <b>testing</b> sur <b>master</b>, git va utiliser 3 sources</p>
                <ul class="small">
                    <li class="fragment"><b>c2b9e</b> => master</li>
                    <li class="fragment"><b>87ab2</b> => testing</li>
                    <li class="fragment"><b>f30ab</b> => leur ancêtre commun le plus proche</li>
                </ul>
                <div class="fragment">
                    <p class="small">Un commit de fusion qui résulte de la fusion à 3 sources est créé.
                        <br>Ce commit est spécial car il possède plus d'un parent.</p>
                    <pre>
                    <code class="bash" data-trim>
                        * 1337c # Commit de fusion
                        |\
                        * | c2b9e (master)
                        | * 87ab2 (testing)
                        |/
                        * f30ab
                    </code>
                </pre>
                </div>
            </section>
        </section>
        <section>
            <section>
                <h3 class="title">Les conflits de fusion</h3>
                <p class="small">Ce qui se passe dans la vraie vie</p>
                <img src="https://media.giphy.com/media/cFkiFMDg3iFoI/giphy.gif" class="no-border" alt="">
            </section>
            <section>
                <p>Dans la réalité, la fusion à 3 sources peut échouer quand au moins 2 des 3 sources ont des modifications communes.</p>
                <img src="img/merge-conflict.png" class="no-border" alt="">
                <p class="small">Pour résoudre un conflit, on utilise un <b>mergetool</b> (ou celui fourni directement par un IDE)</p>
            </section>
            <section>

            </section>
        </section>
        <section>
            <section>
                <h3 class="title">Repository</h3>
                GIT est un système distribué, il est donc utilisable en local et les modifications peuvent être publiées sur un serveur distant.
                <p class="fragment">On nomme souvent le repo distant <b>origin</b></p>
                <img src="img/repository-1.png" class="fragment no-border" alt="">
            </section>
            <section>
                <h3 class="title">Initialiser un projet GIT from scratch</h3>
                <pre>
                    <code class="bash" data-trim data-noescape>
                        git init
                    </code>
                </pre>
                <p class="small">
                    La commande va créer le dossier <b>.git</b> nécessaire au fonctionnement de Git <br>
                    On peut ensuite y ajouter le code existant dans le dossier (le cas échéant).
                </p>
                <pre>
                    <code class="bash" data-trim data-noescape>
                        git add . # Ajoute tous les fichiers à l'index
                        git commit -m "Initial commit" # Créer un commit
                    </code>
                </pre>

            </section>
            <section>
                <h3 class="title">Initialiser un projet GIT depuis un repo distant</h3>
                <pre>
                    <code class="bash" data-trim data-noescape>
                        git clone https://github.com/username/monprojet mondossier
                    </code>
                </pre>
                <p class="small">
                    Git va récupérer l'historique du repository distant et l'enregistrer sur l'ordinateur du client dans le dossier "mondossier"
                </p>
                <p class="small fragment">Il va également créer une branche locale <b>master</b> au niveau de <b>origin/master</b></p>
            </section>
            <section>
                <h3 class="title">Publier son code sur le repository distant</h3>
                <pre>
                    <code class="bash" data-trim data-noescape>
                        git push origin branche
                    </code>
                </pre>
                <p class="small fragment">
                    Késako cette commande ?
                    <br>
                    Sémantiquement cela veut dire : on <b>pousse</b> sur <b>origin</b> la <b>branche</b> voulue.
                </p>
                <pre class="fragment">
                    <code class="bash" data-trim data-noescape>
                        git push origin branche:feature-1
                    </code>
                </pre>
                <p class="small fragment">Cette syntaxe permet de pousser la branche <b>branche</b> sous le nom <b>feature-1</b> sur le repository</p>
            </section>
            <section>
                <h4 class="title">Le FETCH</h4>
                <p class="small">Fetch est une commande pour récupérer une mise à jour des branches existantes sur le repository distant</p>
                <pre>
                    <code class="bash" data-trim data-noescape>
                        git fetch
                    </code>
                </pre>
                <p class="fragment small">Si votre branche distante est plus avancée que votre locale, il faut donc <b>fetch</b> puis <b>merge</b>, cette opération peut être réalisée avec une seule commande</p>
                <pre class="fragment">
                    <code class="bash" data-trim data-noescape>
                        git pull
                    </code>
                </pre>
            </section>
            <section>
                <h4 class="title">le Branch Tracking ?</h4>
                <p>C'est le fait qu'une branche locale sache sur quelle branche distante pousser ses commits</p>
                <p class="small fragment">Utilisation implicite, sauf en cas de branche au nommage différente entre le local et le distant</p>
                <pre class="fragment">
                    <code class="bash" data-trim data-noescape>
                        git checkout -b feat origin/topfeature # Branche nommée différemment
                        git branch -u origin/mabranche # Branche locale existante
                    </code>
                </pre>
            </section>
        </section>
        <section>
            <section>
                <h3 class="title">Le Rebasing</h3>
                <p class="small fragment">Pour intégrer les modifications d'une branche dans une autre, deux possibilités:</p>
                <ul>
                    <li class="fragment">Merge</li>
                    <li class="fragment"><b>Rebase</b></li>
                </ul>
            </section>
            <section>
                <img src="img/rebase-1.png" class="no-border" alt="">
                <p class="">On rebase la branche <b>experiment</b> sur <b>master</b>, ainsi les commits seront rejoués sur la branche master</p>
            </section>
            <section>
                 <pre class="">
                    <code class="bash" data-trim data-noescape>
                        git checkout experiment
                        git rebase master
                    </code>
                </pre>
                <img src="img/rebase-2.png" class="no-border" alt="">
                <p class="">Un merge aurait réalisé une fusion à 3 sources, alors que le rebase nous permet une fusion <b>fast-forward</b></p>
                <p class="small">Info importante: un rebase créé de nouveaux commits, il ne les déplace pas</p>
            </section>
            <section>
                <h4 class="title">Rebase plus complexe</h4>
                <p>Dans le cas d'une branche qui part d'une branche, il est possible de ne rebase qu'une partie de l'une sur la master.</p>
                <img src="img/rebase-3.png" class="no-border" alt="">
            </section>
            <section>
                <pre>
                    <code class="bash" data-trim>
                        git rebase --onto master serveur client
                    </code>
                </pre>
                <p class="small">Git va ainsi rejouer les commits depuis l'ancêtre commun des branches <b>client</b> et <b>server</b> sur <b>master</b></p>
                <img src="img/rebase-4.png" class="no-border" alt="">
            </section>
            <section>
                <h4>Rebase intéractif</h4>
                <p>Le rebase interactif est un outil puissant pour vous mettre de modifier l'historique des commits</p>
                <p>Vous pourrez réaliser sur chaque commit une de ces opérations :</p>
                <ul>
                    <li>Renommer un commit</li>
                </ul>
            </section>
        </section>
        <section>
            <h3 class="title">PDF sur le fonctionnement de GIT par Scott Chacon</h3>
            <a href="https://geekographie.maieul.net/IMG/pdf/progit.fr.pdf">Dispo ici !</a>
        </section>
    </div>
</div>

<script src="js/reveal.js"></script>

<script>
	// More info about config & dependencies:
	// - https://github.com/hakimel/reveal.js#configuration
	// - https://github.com/hakimel/reveal.js#dependencies
	Reveal.initialize({
		hash: true,
		dependencies: [
			{src: 'plugin/markdown/marked.js'},
			{src: 'plugin/markdown/markdown.js'},
			{src: 'plugin/highlight/highlight.js'},
			{src: 'plugin/notes/notes.js', async: true}
		],
		// Display presentation control arrows
		controls: true,
		// Help the user learn the controls by providing hints, for example by
		// bouncing the down arrow when they first encounter a vertical slide
		controlsTutorial: true,
		// Determines where controls appear, "edges" or "bottom-right"
		controlsLayout: 'bottom-right',
		// Visibility rule for backwards navigation arrows; "faded", "hidden"
		// or "visible"
		controlsBackArrows: 'faded',
		// Display a presentation progress bar
		progress: true,
		// Display the page number of the current slide
		slideNumber: false,
		// Push each slide change to the browser history. Implies `hash: true`
		history: false,
		// Enable keyboard shortcuts for navigation
		keyboard: true,
		// Enable the slide overview mode
		overview: true,
		// Vertical centering of slides
		center: true,
		// Enables touch navigation on devices with touch input
		touch: true,
		// Loop the presentation
		loop: false,
		// Change the presentation direction to be RTL
		rtl: false,
		// See https://github.com/hakimel/reveal.js/#navigation-mode
		navigationMode: 'default',
		// Randomizes the order of slides each time the presentation loads
		shuffle: false,
		// Turns fragments on and off globally
		fragments: true,
		// Flags whether to include the current fragment in the URL,
		// so that reloading brings you to the same fragment position
		fragmentInURL: false,
		// Flags if the presentation is running in an embedded mode,
		// i.e. contained within a limited portion of the screen
		embedded: false,
		// Flags if we should show a help overlay when the questionmark
		// key is pressed
		help: true,
		// Flags if speaker notes should be visible to all viewers
		showNotes: false,
		// Global override for autoplaying embedded media (video/audio/iframe)
		// - null: Media will only autoplay if data-autoplay is present
		// - true: All media will autoplay, regardless of individual setting
		// - false: No media will autoplay, regardless of individual setting
		autoPlayMedia: null,
		// Global override for preloading lazy-loaded iframes
		// - null: Iframes with data-src AND data-preload will be loaded when within
		//   the viewDistance, iframes with only data-src will be loaded when visible
		// - true: All iframes with data-src will be loaded when within the viewDistance
		// - false: All iframes with data-src will be loaded only when visible
		preloadIframes: null,
		// Number of milliseconds between automatically proceeding to the
		// next slide, disabled when set to 0, this value can be overwritten
		// by using a data-autoslide attribute on your slides
		autoSlide: 0,
		// Stop auto-sliding after user input
		autoSlideStoppable: true,
		// Use this method for navigation when auto-sliding
		autoSlideMethod: Reveal.navigateNext,
		// Specify the average time in seconds that you think you will spend
		// presenting each slide. This is used to show a pacing timer in the
		// speaker view
		defaultTiming: 120,
		// Specify the total time in seconds that is available to
		// present.  If this is set to a nonzero value, the pacing
		// timer will work out the time available for each slide,
		// instead of using the defaultTiming value
		totalTime: 0,
		// Specify the minimum amount of time you want to allot to
		// each slide, if using the totalTime calculation method.  If
		// the automated time allocation causes slide pacing to fall
		// below this threshold, then you will see an alert in the
		// speaker notes window
		minimumTimePerSlide: 0,
		// Enable slide navigation via mouse wheel
		mouseWheel: false,
		// Hide cursor if inactive
		hideInactiveCursor: true,
		// Time before the cursor is hidden (in ms)
		hideCursorTime: 5000,
		// Hides the address bar on mobile devices
		hideAddressBar: true,
		// Opens links in an iframe preview overlay
		// Add `data-preview-link` and `data-preview-link="false"` to customise each link
		// individually
		previewLinks: false,
		// Transition style
		transition: 'slide', // none/fade/slide/convex/concave/zoom
		// Transition speed
		transitionSpeed: 'default', // default/fast/slow
		// Transition style for full page slide backgrounds
		backgroundTransition: 'fade', // none/fade/slide/convex/concave/zoom
		// Number of slides away from the current that are visible
		viewDistance: 3,
		// Number of slides away from the current that are visible on mobile
		// devices. It is advisable to set this to a lower number than
		// viewDistance in order to save resources.
		mobileViewDistance: 2,
		// Parallax background image
		parallaxBackgroundImage: '', // e.g. "'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg'"
									 // Parallax background size
		parallaxBackgroundSize: '', // CSS syntax, e.g. "2100px 900px"
									// Number of pixels to move the parallax background per slide
									// - Calculated automatically unless specified
									// - Set to 0 to disable movement along an axis
		parallaxBackgroundHorizontal: null,
		parallaxBackgroundVertical: null,
		// The display mode that will be used to show slides
		display: 'block',
		pdfSeparateFragments: false,
	});
</script>
</body>
</html>
